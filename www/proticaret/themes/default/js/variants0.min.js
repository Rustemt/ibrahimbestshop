function parseXml(a)
{
    if ($.browser.msie) { var b = new ActiveXObject("Microsoft.XMLDOM"); b.loadXML(a); a = b } xmldoc = a; CreateVariants(); InitVariants(); ActiveVariants(); overVariantSize0(0); setVariantSize0(0)
}
function CreateVariants()
{
    var a = 0; var b = 0; var c = 0;
    $(xmldoc).find("variant").each(function ()
    {
        if ($("#size0SelectorContent input[title=" + $(this).attr("size0").replace(/\//g, "-").replace(" ", "-").replace(",", "-").replace(".", "-") + "]").length == 0)
        {
            $("#size0SelectorContent div#sizes0").append('<input rel="' + $(this).attr("pimgval") + '" type="image" title="' + $(this).attr("size0") + '" id="size0_' + a + '" onmouseover="overVariantSize0(' + a + ');" onmouseout="outVariantSize0(' + a + ');" onclick="setVariantSize0(' + a + ');return false;" class="soldOut" src="' + $(this).attr("size0img") + '" ></input>'); a = a + 1
        }
    })
}
function InitVariants()
{
    $(xmldoc).find("variant[qty != '0']").each(function () { $("#size0SelectorContent input[title=" + $(this).attr("size0").replace(/\//g, "-").replace(" ", "-").replace(",", "-").replace(".", "-") + "]").attr("class", "normal") })
} function ActiveVariants() { $(xmldoc).find("variant[qty != '0']").each(function () { if ($(this).attr("size0") != null) { Size0Active = true; $("#size0SelectorContent").show() } return false }) } function CheckCartButton() { var a = true; if (Size0Active == true && a == true && SelectedSize0Id < 0) { a = false } if (Size1Active == true && a == true && SelectedSize1Id < 0) { a = false } if (Size2Active == true && a == true && SelectedSize2Id < 0) { a = false } if (a == true) { if ($(xmldoc).find("variant[size0 ='" + SelectedSize0 + "']").attr("qty") > 0) { SizesSelectedUnitId = $(xmldoc).find("variant[size0 ='" + SelectedSize0 + "']").attr("id"); SizesSelectedInStock = true; $(".cartbutton2").button("option", "label", AddToCartMsg) } else { SizesSelectedUnitId = $(xmldoc).find("variant[size0 ='" + SelectedSize0 + "']").attr("id"); SizesSelectedInStock = false; $(".cartbutton2").button("option", "label", StockOutMsg) } } } function resetButtons() { if (SelectedSize0Id >= 0) { overVariantSize0(SelectedSize0Id); setVariantSize0(SelectedSize0Id) } else { $("#size0SelectorContent #textSize0").html("") } } function outVariantSize0(a) { InitVariants(); $("#size0SelectorContent input[id=size0_" + a + "]").removeClass("hover"); resetButtons() } function overVariantSize0(a) { $("#size0SelectorContent input:not(.selected):not(.soldOut):not(.selectedSoldOut)[id=size0_" + a + "]").addClass("hover"); var b = $("#size0SelectorContent input[id=size0_" + a + "]").attr("title"); $("#size0SelectorContent #textSize0").html(b); var c = $("#size0SelectorContent input[id=size0_" + a + "]").attr("rel"); $(".slider_nav li a img").each(function () { if ($(this).attr("src").indexOf(c) >= 0) { $(this).trigger("click"); return } }) } function setVariantSize0(a) { if (a >= 0) { $("#size0SelectorContent input:not(.selected):not(.soldOut):not(.selectedSoldOut)[id=size0_" + a + "]").attr("class", "selected"); SelectedSize0 = $("#size0SelectorContent input[id=size0_" + a + "]").attr("title"); SelectedSize0Id = a; $("#size0SelectorContent #textSize0").html(SelectedSize0); CheckCartButton() } } var SizesSelectedInStock = false; var SizesSelectedUnitId = ""; var Size0Active = false; var Size1Active = false; var Size2Active = false; var HoveredSize0Id = "-1"; var HoveredSize1Id = "-1"; var HoveredSize2Id = "-1"; var SelectedSize0Id = "-1"; var SelectedSize1Id = "-1"; var SelectedSize2Id = "-1"; var SelectedSize0 = ""; var SelectedSize1 = ""; var SelectedSize2 = ""; var xmldoc; $(document).ready(function () { $.ajax({ type: "GET", url: "/store/productsizesxml.aspx?ProductId=" + ProductId, cache: false, dataType: $.browser.msie ? "text" : "xml", success: parseXml }) })