function getCookie(a){if(document.cookie.length>0){c_start=document.cookie.indexOf(a+"=");if(c_start!=-1){c_start=c_start+a.length+1;c_end=document.cookie.indexOf(";",c_start);if(c_end==-1)c_end=document.cookie.length;return unescape(document.cookie.substring(c_start,c_end))}}return""}function OnCallSendMsgComplete(a,b){var c=$get("txtMsg");if(c!=null){c.value="";c.focus()}}function CallClosed(){PageMethods.Closed(getCookie("chatId"),OnCallSendMsgComplete)}function CallSendMsg(){try{var a=$get("txtMsg");PageMethods.SendMsg(a.value,getCookie("chatId"),OnCallSendMsgComplete)}catch(b){}}function OnSetTypingNotificationComplete(a,b){}function SetTypingNotification(){try{var a=$get("txtMsg");PageMethods.SetTypingNotification(getCookie("chatId"),a.value,OnSetTypingNotificationComplete)}catch(b){}}function checkEnter(a){var b;if(a&&a.which){a=a;b=a.which}else{a=event;b=a.keyCode}if(b==13){CallSendMsg();return false}else{var c=new Date;var d=c.getSeconds()-lastNotify.getSeconds();var e=c.getMinutes()-lastNotify.getMinutes();if(e!=0||d>=3){SetTypingNotification();lastNotify=new Date}return true}}var lastNotify=new Date